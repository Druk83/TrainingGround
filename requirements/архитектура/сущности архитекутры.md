# **Сущности архитектуры «Русский язык: тренировочный полигон» (ArchiMate 3.2)**

Документ формализует состав бизнес-, прикладных и технологических сущностей согласно ArchiMate. Обязательные элементы указаны отдельно, возможные расширения помечены *(опц.)*.

---

## **Бизнес-слой (Business Layer)**

### **Business Actor / Role**
1. Ученик (пользователь тренажёра)
2. Куратор / Учитель
3. Администратор контента
4. Техподдержка / DevOps
5. Системный администратор школы *(опц. он же Админ)*
6. Регулятор / образовательный методист *(опц.)*

### **Business Service**
7. Сервис «Прохождение урока»
8. Сервис «Выдача подсказок»
9. Сервис «Аналитика и отчётность»
10. Сервис «Модерация контента»
11. Сервис «Инцидент-менеджмент и античит»
12. Сервис «Интеграция со школьными системами» *(опц.)*

### **Business Process**
13. Выбор курса и уровня
14. Генерация пакета заданий
15. Прохождение уровня (ответы, таймеры, подсказки)
16. Расчёт прогресса и достижений
17. Генерация отчётов для ученика/группы
18. Модерация шаблонов и пересоздание эмбеддингов
19. Реагирование на инциденты и античит

### **Business Object**
20. Тема / Курс
21. Уровень
22. Шаблон задания
23. Экземпляр задания
24. Правило / Пояснение
25. Подсказка
26. Попытка прохождения
27. Статистика прогресса
28. Инцидент / античит-событие
29. Профиль пользователя / группы

---

## **Прикладной слой (Application Layer)**

### **Application Component**
30. PWA Shell (TypeScript, Web Components)
31. Lesson Player
32. Hint Panel
33. Teacher Dashboard
34. Admin Console
35. Session Manager (Rust)
36. Scoring Engine (Rust)
37. Hint Service (Rust)
38. Answer Checker (Rust)
39. Reporting API (Rust)
40. Template Generator (Python)
41. Explanation Builder (Python)
42. Embedding Pipeline (Python)
43. Morphology Service (Python)
44. Analytics Worker
45. SSO Adapter *(опц.)*

### **Application Service**
46. Lesson Execution Service
47. Session Management Service
48. Hint Delivery Service
49. Scoring Service
50. Reporting & Analytics Service
51. Template Provisioning Service
52. Explanation Service
53. Knowledge Embedding Service
54. Linguistic Analysis Service
55. Admin / Governance Service
56. External Integration Service *(опц.)*

### **Application Interface**
57. REST/JSON API (HTTPS 443)
58. SSE / WebSocket Channel
59. Admin API (REST)
60. Content Webhook (Mongo Change Streams → Python)
61. SSO Interface (OAuth2 / SAML) *(опц.)*

### **Application Data Object**
62. Template Catalog
63. Task Instance
64. Attempt Record
65. Hint Usage Log
66. Progress Summary
67. Embedding Vector
68. Anticheat Event
69. Feature Flag
70. Report Export (CSV/PDF)

---

## **Технологический слой (Technology Layer)**

### **Technology Node / Device**
71. PWA Client Device + CDN Edge
72. Rust API Node (Docker/Kubernetes pod)
73. Python Generator Node
74. MongoDB Replica Set
75. Redis Cluster
76. Qdrant Cluster
77. Object Storage Node (S3)
78. Monitoring/Logging Stack Node (Prometheus, Grafana, Loki)
79. CI/CD Runner Node

### **System Software / Technology Service**
80. Docker Engine / Container Orchestrator
81. Nginx / Ingress Controller
82. Vault / Secrets Manager
83. GitHub Actions (CI/CD)
84. TLS Termination Service
85. Backup & Restore Service

### **Technology Interface**
86. HTTPS 443 (клиент ↔ API)
87. gRPC/REST 9000+ (внутрисервисные вызовы)
88. MongoDB 27017 (Replica communication)
89. Redis 6379
90. Qdrant 6333
91. Object Storage 9000 (S3 API)
92. Prometheus 9090 / Loki 3100 (метрики/логи)

### **Artifact**
93. PWA Bundle (JS/CSS + Service Worker)
94. Rust API Docker Image
95. Python Service Docker Image
96. Infrastructure-as-Code пакеты (Terraform/Helm)
97. Monitoring Dashboards

### **Technology Process**
98. Сбор и доставка статики PWA
99. Выполнение контейнеров и обновлений
100. Репликация и резервное копирование БД
101. Сбор метрик и алёртов
102. Генерация снапшотов Qdrant

---

## **Соответствия между слоями**

### **Business → Application**

| Business Service | Application Service |
|------------------|---------------------|
| Прохождение урока | Lesson Execution, Session Management |
| Выдача подсказок | Hint Delivery, Explanation |
| Аналитика и отчётность | Reporting & Analytics |
| Модерация контента | Template Provisioning, Knowledge Embedding |
| Инцидент-менеджмент | Admin/Governance, Monitoring (Analytics Worker) |

### **Application → Technology**

| Application Component | Technology Node |
|-----------------------|-----------------|
| PWA Shell / Lesson Player / Hint Panel | PWA Client Device + CDN Edge |
| Session Manager / Scoring / Hint / Reporting | Rust API Node + MongoDB + Redis |
| Template Generator / Explanation / Embedding / Morphology | Python Generator Node + MongoDB + Qdrant |
| Analytics Worker | Python Generator Node / отдельный worker node |
| Teacher Dashboard / Admin Console | PWA Device + Rust API Node |
| SSO Adapter *(опц.)* | Rust API Node + SSO Interface |

Эти сущности являются основой для диаграмм AL/BL/TL, а также для дальнейших описаний архитектурных связей и потоков данных.
