# Production configuration for TrainingGround Rust API

[server]
host = "0.0.0.0"
port = 8081
workers = 8

[database]
mongo_uri = "mongodb://mongo-prod:27017"
mongo_database = "trainingground"

[redis]
uri = "redis://:${REDIS_PASSWORD}@redis-prod:6379/0"
pool_size = 20
connection_timeout_secs = 30

[auth]
jwt_secret = "${JWT_SECRET}"
jwt_expiration_hours = 24

[rate_limit]
per_user_per_minute = 100
per_ip_per_minute = 200

[python_api]
url = "http://python-api:8000"
timeout_secs = 2

[hints]
max_per_session = 2
cost = 5
cache_ttl_secs = 300

[anticheat]
speed_threshold_per_hour = 10
repeated_threshold = 8
suspicious_threshold = 5

[session]
ttl_secs = 3600

[logging]
level = "info"
format = "json"

[reporting]
signed_url_ttl_hours = 24
export_ttl_hours = 24
export_rate_limit_per_hour = 10
live_polling_interval_secs = 30
enable_live_updates = true
worker_interval_secs = 3600

# [object_storage]
# Object Storage configuration for report exports
# All values are read from environment variables via ObjectStorageSettings::from_env()
# OBJECT_STORAGE_BUCKET, OBJECT_STORAGE_REGION, OBJECT_STORAGE_ENDPOINT,
# OBJECT_STORAGE_ACCESS_KEY, OBJECT_STORAGE_SECRET_KEY, OBJECT_STORAGE_REPORTS_PREFIX

[content]
stream_name = "${CONTENT_STREAM_NAME}"

[sso]
enabled = false
