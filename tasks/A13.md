# A13 — проверка внешних внешних зависимостей

## Контекст
После запуска `make dev-setup` на Linux/WSL разруливаются сотни пакетов как из npm‑экосистемы (Frontend), так и из Rust/Python (бэкенд, генератор контента). Вторая часть особенно тяжёлая: `pip install -e .[dev]` подтягивает `torch`/CUDA-бинги, `pymorphy2`, `starlette`, `pymongo` и весь стек NLP/ML. Есть ощущение, что часть из этого — overengineering: зависимости либо используются только в dev-профиле, либо не задокументированы, либо можно заменить более лёгкими альтернативами.

## Цель
Проверить и задокументировать внешний стек зависимостей по всем модулям (фронтенд, `backend/rust-api`, `backend/python-generator`), чтобы:
- убедиться, что все версии совпадают с используемыми фичами,
- выявить очевидное дублирование/устаревшие зависимости,
- оценить, какие пакеты можно перевести в optional extras (особенно для `pymongo`, `torch/cuda`, `starlette`),
- зафиксировать список “масто́вых” зависимостей (без них система не запускается).

## Задачи
1. **Фронтенд.** Пройтись по `package.json`/`package-lock.json`, зафиксировать топ‑10 тяжёлых пакетов (React и ESLint в расчёт не брать), понять, нужны ли они все для админки. Выписать список зависимостей, которые не импортируются ни в `frontend/src`, ни в тестах.
2. **Rust.** Запустить `cargo metadata --locked` и сформировать список новых/устаревших crate‑ов. Проверить, не подтягиваются ли пакеты, которые нужны только для feature «production» (например, `rpc`), но используются в тестах; оценить возможность их вынесения в optional features.
3. **Python.** Исследовать `backend/python-generator/pyproject.toml` (или `setup.py`) — какие extras входят в `.dev`? Какие пакеты действительно требуют CUDA (torch, nvidia-*), а какие можно перевести в optional extras. Проверить, не подтягивается ли `torch` по transitively `pydantic`s, если генератор не запускает GPU.
4. **Документирование.** В `docs/` или `requirements/структураПО/` добавить секцию (можно отдельный файл) с описанием “почему мы ставим столько пакетов”. Указать, какие зависимости критичны, какие optional, и какие можно исключить после следующего спринта.

## Критерии завершения
- В `tasks/A13.md` (этот файл) добавлен чеклист, подкреплённый результатами аудита.
- Создан краткий документ `docs/dependencies-audit.md` со списком пакетов и пометками «Critical / Optional / Remove» для каждого модуля.
- При необходимости внесены PR-заметки по зависимостям (например, рекомендовать удалить лишние extras из `pyproject`).
