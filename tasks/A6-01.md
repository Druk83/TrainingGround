# A6-01 — UI Суперпользователя (Системный администратор)

## Статус выполнения

**Backend (P0):** ЗАВЕРШЕНО (12/12 - 100%)
- Модели: User (расширен), Group, AuditLog (расширен)
- RBAC Middleware: admin_guard_middleware
- Сервисы: UserManagementService, GroupService, AuditService
- Handlers: 7 endpoints для пользователей, 5 endpoints для групп
- Роутинг: /admin/users/*, /admin/groups/*
- Компиляция: успешна (cargo clippy pass)
- 4 роли: student, teacher, content_admin, admin

**Backend (P1):** НЕ НАЧАТО
- Endpoints для инцидентов античита
- Endpoints для системных настроек
- Endpoints для аудит-логов (просмотр)
- Rate limiting для /admin/*

**Frontend (P0):** ЗАВЕРШЕНО (9/19 - 47%)
- Страницы: users-management.ts, groups-management.ts
- API типы и методы для User/Group
- Роутинг: /admin/users, /admin/groups
- Навигация в app-header для 4 ролей
- CRUD пользователей: создание, редактирование, удаление, блокировка/разблокировка
- CRUD групп: создание, редактирование, удаление, назначение куратора
- Фильтры и поиск для обеих таблиц

**Тестирование:** НЕ НАЧАТО

**Документация:** НЕ НАЧАТО

## Контекст
Согласно `requirements/предметная область.md` и `requirements/сценарии/требования.md` (4.1.3, 4.2.1), система должна предоставить UI для Суперпользователя (Системного администратора) с функциями управления пользователями, мониторинга безопасности и системных настроек. Это критичная роль для запуска и поддержки системы в production.

**Отличие от Администратора контента:** Суперпользователь управляет СИСТЕМОЙ и ПОЛЬЗОВАТЕЛЯМИ, а Администратор контента управляет ШАБЛОНАМИ и ЗАДАНИЯМИ.

## Состав работ

### 1. Страница Dashboard (главная панель)
**Файл:** `frontend/src/pages/admin-console.ts`

**Компоненты:**
- **Системные метрики в реальном времени:**
  - Uptime (время работы системы)
  - Количество активных сессий
  - API latency (p50, p95, p99)
  - Количество зарегистрированных пользователей
  - Количество активных пользователей (за последние 24 часа)

- **Счетчик инцидентов античита:**
  - По типам: speedhack, repeated_answers, bot_detection
  - По степени тяжести: low, medium, high, critical
  - Кнопка "Все инциденты" → переход в раздел мониторинга

- **Статус сервисов (health checks):**
  - MongoDB (статус replica set, PRIMARY/SECONDARY)
  - Redis (память, количество ключей)
  - Qdrant (количество векторов, статус коллекций)
  - Python Generator (статус, очередь эмбеддингов)
  - YandexGPT API (доступность, лимиты)

- **Быстрые действия:**
  - "Создать пользователя"
  - "Просмотреть инциденты"
  - "Системные настройки"

### 2. Раздел "Управление пользователями"
**Компонент:** `frontend/src/components/user-management.ts`

**Функции:**
- **Таблица пользователей:**
  - Колонки: ID, Email, ФИО, Роль, Группа, Статус, Дата регистрации, Последний вход
  - Поиск по email, ФИО, ID
  - Фильтры:
    - По роли (student, teacher, content_admin, admin)
    - По статусу (active, blocked, pending)
    - По группе/школе
  - Пагинация (по 25/50/100 записей)
  - Сортировка по колонкам

- **Создание пользователя:**
  - Модальное окно с формой:
    - Email (обязательно, валидация)
    - Пароль (автогенерация или ручной ввод)
    - ФИО (обязательно)
    - Роль (выбор из списка)
    - Группа/школа (выбор из существующих)
    - Отправить приглашение по email (чекбокс)
  - Валидация:
    - Проверка уникальности email
    - Проверка формата пароля (минимум 8 символов)

- **Редактирование пользователя:**
  - Изменение роли
  - Изменение группы
  - Сброс пароля (отправка email с ссылкой)
  - Блокировка/разблокировка аккаунта

- **Удаление пользователя:**
  - Модальное подтверждение
  - Опции:
    - Удалить полностью (GDPR compliance)
    - Деактивировать (сохранить данные для статистики)
  - Предупреждение о последствиях

- **Массовые операции:**
  - Выбор нескольких пользователей (чекбоксы)
  - Массовая блокировка
  - Массовое изменение группы
  - Экспорт списка в CSV

- **История действий пользователя:**
  - Последние 10 сессий
  - История блокировок
  - История изменений роли
  - Инциденты античита

### 3. Раздел "Управление группами"
**Компонент:** `frontend/src/components/group-management.ts`

**Функции:**
- **Таблица групп:**
  - Колонки: Название, Школа, Куратор, Количество учеников, Дата создания
  - Поиск по названию, школе
  - Фильтр по школе

- **Создание группы:**
  - Название (класс, параллель)
  - Школа (выбор из списка или создание новой)
  - Назначение куратора (учитель)
  - Описание (необязательно)

- **Редактирование группы:**
  - Изменение названия
  - Смена куратора
  - Добавление/удаление учеников

- **Просмотр состава группы:**
  - Список учеников
  - Краткая статистика по группе:
    - Средний процент прохождения
    - Количество активных учеников (за неделю)

### 4. Раздел "Мониторинг античита"
**Компонент:** `frontend/src/components/anticheat-monitor.ts`

**Функции:**
- **Таблица инцидентов:**
  - Колонки: Дата/время, Пользователь, Тип инцидента, Степень, Действие, Детали
  - Фильтры:
    - По типу (speed_hits, repeated_hits, bot_detection)
    - По степени тяжести (low, medium, high, critical)
    - По статусу (flagged, blocked, resolved)
    - По дате (сегодня, неделя, месяц, кастомный период)
  - Пагинация

- **Детали инцидента (модальное окно):**
  - Информация о пользователе
  - Тип и причина инцидента
  - Сессия (задания, ответы, время)
  - Гистограмма времени ответов
  - Паттерны повторяющихся ответов
  - IP-адрес, User-Agent
  - Действия:
    - Разблокировать пользователя
    - Продлить блокировку
    - Отметить как ложное срабатывание
    - Экспорт лога в JSON

- **Статистика античита:**
  - График инцидентов за период
  - Распределение по типам
  - Топ-5 пользователей с нарушениями
  - False positive rate (процент ложных срабатываний)

### 5. Раздел "Системные настройки"
**Компонент:** `frontend/src/components/system-settings.ts`

**Функции:**
- **Интеграции:**
  - YandexGPT:
    - API Key (masked input)
    - Folder ID
    - Модель (выбор: yandexgpt-lite, yandexgpt)
    - Temperature (слайдер 0.0-1.0)
    - Max tokens (input)
    - Тест подключения (кнопка)

  - SSO (OAuth2/SAML):
    - Включить/выключить (toggle)
    - Provider (выбор: Яндекс ID, VK ID, Госуслуги)
    - Client ID, Client Secret
    - Redirect URI
    - Тест SSO flow

  - Email (SMTP):
    - Сервер, порт
    - Логин, пароль
    - From email, From name
    - Тест отправки письма

- **Параметры античита:**
  - Порог скорости ответа (секунды)
  - Максимум speed_hits до блокировки
  - Максимум repeated_hits до блокировки
  - Длительность блокировки (часы)
  - Включить CAPTCHA (toggle)
  - Порог для CAPTCHA (количество подозрительных действий)

- **Rate Limiting:**
  - Requests per minute (для API)
  - Включить/выключить по endpoint
  - Whitelist IP-адресов (для тестирования)

- **Резервное копирование:**
  - Расписание автобэкапов (cron expression)
  - Хранилище (Yandex Object Storage настройки)
  - Ручной запуск бэкапа (кнопка)
  - История бэкапов (таблица)
  - Восстановление из бэкапа (кнопка + модальное подтверждение)

### 6. Раздел "Аудит и логи"
**Компонент:** `frontend/src/components/audit-logs.ts`

**Функции:**
- **Таблица аудит-логов:**
  - Колонки: Дата/время, Пользователь, Действие, Ресурс, IP, Результат
  - Фильтры:
    - По пользователю (суперадмин, контент-админ)
    - По типу действия (create, update, delete, block, unblock)
    - По ресурсу (user, group, template, system_settings)
    - По дате
  - Экспорт в CSV/JSON

- **Детали действия:**
  - До/после (diff для изменений)
  - Причина (если указана)
  - User-Agent, IP

### 7. Навигация и роутинг
**Обновить:** `frontend/src/app-shell.ts` или создать `frontend/src/router.ts`

**Маршруты:**
```
/admin                          - Dashboard
/admin/users                    - Управление пользователями
/admin/users/:id                - Профиль пользователя
/admin/groups                   - Управление группами
/admin/anticheat                - Мониторинг античита
/admin/anticheat/incidents/:id  - Детали инцидента
/admin/settings                 - Системные настройки
/admin/audit                    - Аудит и логи
```

**Защита маршрутов:**
- Проверка роли через JWT claims
- Редирект на /forbidden при отсутствии прав
- Refresh token при истечении JWT

## API Endpoints (Rust API)

### Пользователи
```
GET    /admin/users                    - Список пользователей с фильтрами
POST   /admin/users                    - Создать пользователя
GET    /admin/users/:id                - Получить пользователя
PUT    /admin/users/:id                - Обновить пользователя
DELETE /admin/users/:id                - Удалить пользователя
POST   /admin/users/:id/block          - Заблокировать
POST   /admin/users/:id/unblock        - Разблокировать
POST   /admin/users/:id/reset-password - Сбросить пароль
GET    /admin/users/:id/history        - История действий пользователя
POST   /admin/users/bulk               - Массовые операции
GET    /admin/users/export             - Экспорт в CSV
```

### Группы
```
GET    /admin/groups                   - Список групп
POST   /admin/groups                   - Создать группу
GET    /admin/groups/:id               - Получить группу
PUT    /admin/groups/:id               - Обновить группу
DELETE /admin/groups/:id               - Удалить группу
GET    /admin/groups/:id/students      - Ученики группы
POST   /admin/groups/:id/students      - Добавить учеников
DELETE /admin/groups/:id/students/:uid - Удалить ученика из группы
```

### Системные метрики
```
GET    /admin/system/metrics           - Системные метрики (uptime, sessions)
GET    /admin/system/health            - Health checks всех сервисов
GET    /admin/system/incidents/stats   - Статистика античита
```

### Античит
```
GET    /admin/incidents                - Список инцидентов с фильтрами
GET    /admin/incidents/:id            - Детали инцидента
PUT    /admin/incidents/:id            - Обновить статус (resolve, false_positive)
POST   /admin/incidents/:id/unblock    - Разблокировать пользователя
GET    /admin/incidents/export         - Экспорт в JSON/CSV
```

### Настройки
```
GET    /admin/settings                 - Получить все настройки
PUT    /admin/settings/yandexgpt       - Обновить YandexGPT настройки
PUT    /admin/settings/sso             - Обновить SSO настройки
PUT    /admin/settings/email           - Обновить email настройки
PUT    /admin/settings/anticheat       - Обновить параметры античита
POST   /admin/settings/test/yandexgpt  - Тест YandexGPT подключения
POST   /admin/settings/test/sso        - Тест SSO flow
POST   /admin/settings/test/email      - Тест отправки email
```

### Бэкапы
```
GET    /admin/backups                  - История бэкапов
POST   /admin/backups/create           - Создать бэкап вручную
POST   /admin/backups/:id/restore      - Восстановить из бэкапа
```

### Аудит
```
GET    /admin/audit                    - Логи аудита с фильтрами
GET    /admin/audit/export             - Экспорт логов
```

## Модели данных (MongoDB)

### users (расширение существующей коллекции)
```javascript
{
  _id: ObjectId,
  email: String,              // уникальный
  password_hash: String,      // bcrypt/argon2
  full_name: String,
  role: String,               // 'student', 'teacher', 'content_admin', 'admin'
  group_id: ObjectId,         // ref: groups
  status: String,             // 'active', 'blocked', 'pending'
  created_at: Date,
  updated_at: Date,
  last_login: Date,
  blocked_until: Date,        // для античита
  block_reason: String,
  sso_id: String,             // для SSO интеграции
  sso_provider: String,       // 'yandex', 'vk', 'gosuslugi'
}
```

### groups (новая коллекция)
```javascript
{
  _id: ObjectId,
  name: String,               // "8А класс"
  school: String,             // "Школа №1 г. Москва"
  curator_id: ObjectId,       // ref: users (роль teacher)
  description: String,
  created_at: Date,
  updated_at: Date,
}
```

### system_settings (новая коллекция)
```javascript
{
  _id: ObjectId,
  key: String,                // уникальный ключ настройки
  value: Object,              // значение (JSON)
  category: String,           // 'yandexgpt', 'sso', 'email', 'anticheat'
  updated_by: ObjectId,       // ref: users (admin)
  updated_at: Date,
}
```

### audit_log (новая коллекция)
```javascript
{
  _id: ObjectId,
  user_id: ObjectId,          // ref: users (кто выполнил действие)
  action: String,             // 'create', 'update', 'delete', 'block', 'unblock'
  resource_type: String,      // 'user', 'group', 'template', 'settings'
  resource_id: String,        // ID затронутого ресурса
  details: Object,            // детали (before/after для update)
  ip_address: String,
  user_agent: String,
  timestamp: Date,
}
```

## Ожидаемые артефакты

### Frontend
- `frontend/src/pages/admin-console.ts` - главная страница суперадмина
- `frontend/src/components/user-management.ts` - управление пользователями
- `frontend/src/components/group-management.ts` - управление группами
- `frontend/src/components/anticheat-monitor.ts` - мониторинг античита
- `frontend/src/components/system-settings.ts` - системные настройки
- `frontend/src/components/audit-logs.ts` - аудит-логи
- `frontend/src/components/user-form.ts` - форма создания/редактирования пользователя
- `frontend/src/components/group-form.ts` - форма создания/редактирования группы
- `frontend/src/lib/admin-api.ts` - API клиент для админских методов
- `frontend/src/lib/api-types.ts` - обновление типов (добавить admin-типы)

### Backend (Rust API)
- `backend/rust-api/src/handlers/admin/users.rs` - хендлеры пользователей
- `backend/rust-api/src/handlers/admin/groups.rs` - хендлеры групп
- `backend/rust-api/src/handlers/admin/incidents.rs` - хендлеры инцидентов
- `backend/rust-api/src/handlers/admin/settings.rs` - хендлеры настроек
- `backend/rust-api/src/handlers/admin/audit.rs` - хендлеры аудита
- `backend/rust-api/src/handlers/admin/backups.rs` - хендлеры бэкапов
- `backend/rust-api/src/models/user.rs` - обновление модели User
- `backend/rust-api/src/models/group.rs` - новая модель Group
- `backend/rust-api/src/models/system_settings.rs` - новая модель SystemSettings
- `backend/rust-api/src/models/audit_log.rs` - новая модель AuditLog
- `backend/rust-api/src/middleware/rbac.rs` - Role-Based Access Control
- `backend/rust-api/src/services/user_service.rs` - сервис пользователей
- `backend/rust-api/src/services/group_service.rs` - сервис групп

### Тесты
- `frontend/src/__tests__/admin-console.test.ts` - E2E тесты UI
- `backend/rust-api/tests/integration/admin_users.rs` - тесты API пользователей
- `backend/rust-api/tests/integration/admin_groups.rs` - тесты API групп
- `backend/rust-api/tests/integration/rbac.rs` - тесты прав доступа

### Документация
- `docs/admin-guide.md` - руководство для суперпользователя
- `docs/api/admin-endpoints.yaml` - OpenAPI спецификация админских endpoint
- `docs/rbac.md` - описание системы прав доступа

## Чек-лист готовности

### Backend API
- [x] Коллекции MongoDB созданы (users расширена, groups создана, audit_log расширена; system_settings - pending P1)
- [x] CRUD endpoints для пользователей реализованы и протестированы
- [x] CRUD endpoints для групп реализованы и протестированы
- [ ] Endpoints для инцидентов античита работают (P1)
- [ ] Endpoints для системных настроек работают (P1)
- [ ] Endpoints для аудит-логов работают (P1)
- [ ] Endpoints для бэкапов работают (P2)
- [x] RBAC middleware проверяет роль 'admin' для всех /admin/* routes
- [x] JWT claims содержат role и group_ids
- [x] Все admin endpoints записывают действия в audit_log
- [x] Валидация входных данных реализована (email, пароль, роли)
- [x] Обработка ошибок возвращает понятные сообщения

### Frontend UI
- [ ] Страница admin-console.ts создана и отображается (существует для content_admin)
- [ ] Dashboard показывает системные метрики в реальном времени
- [x] Таблица пользователей отображает данные с фильтрами и поиском
- [x] Форма создания пользователя работает с валидацией
- [x] Редактирование пользователя (роль, группа, блокировка) работает
- [x] Удаление пользователя с подтверждением работает
- [ ] Сброс пароля отправляет email (не реализовано)
- [ ] Массовые операции (блокировка, смена группы) работают (не реализовано)
- [x] Таблица групп отображается с фильтрами
- [x] Создание/редактирование групп работает
- [x] Назначение куратора группе работает
- [ ] Таблица инцидентов античита отображается с фильтрами (P1)
- [ ] Детали инцидента показывают гистограмму времени ответов (P1)
- [ ] Разблокировка пользователя из инцидента работает (P1)
- [ ] Системные настройки отображаются и сохраняются (P1)
- [ ] Тест подключения к YandexGPT работает (P1)
- [ ] Аудит-логи отображаются с фильтрами (P1)
- [ ] Экспорт данных в CSV/JSON работает (не реализовано)
- [x] Навигация между разделами работает
- [x] Проверка прав доступа (редирект при отсутствии роли admin)

### Безопасность
- [x] Все admin endpoints защищены RBAC middleware
- [x] Пароли хешируются с помощью bcrypt/argon2
- [x] JWT токены содержат корректные claims (role, group_ids)
- [x] Refresh token работает при истечении JWT
- [x] CSRF protection включен для admin routes
- [ ] Rate limiting настроен для /admin/* endpoints (10 req/min) - TODO
- [x] Аудит-логи записываются для всех критических действий
- [ ] Чувствительные данные (API keys) masked в UI (pending Frontend)
- [ ] XSS защита через sanitization (DOMPurify) (pending Frontend)

### Тестирование
- [ ] Unit-тесты для всех admin handlers (coverage ≥80%)
- [ ] Integration-тесты для CRUD пользователей/групп
- [ ] E2E тесты Playwright для основных сценариев
- [ ] Тесты прав доступа (попытка доступа к /admin/* без роли)
- [ ] Тесты валидации (невалидный email, короткий пароль)
- [ ] Нагрузочные тесты (1000 пользователей в таблице, пагинация работает)

### Документация
- [ ] API endpoints задокументированы в OpenAPI спецификации
- [ ] Руководство для суперадминистратора создано (docs/admin-guide.md)
- [ ] Описание RBAC системы создано (docs/rbac.md)
- [ ] Примеры использования API endpoints с curl
- [ ] Troubleshooting guide для типичных проблем

## Тестирование

### Unit-тесты (Rust)
- **User Service:**
  - Создание пользователя с валидацией email
  - Обновление роли пользователя
  - Блокировка/разблокировка
  - Проверка уникальности email
  - Генерация password hash

- **Group Service:**
  - Создание группы
  - Назначение куратора
  - Добавление/удаление учеников

- **RBAC Middleware:**
  - Проверка роли 'admin'
  - Отклонение запросов с ролью 'student'
  - Проверка JWT claims

### Integration-тесты (Rust)
- **CRUD Пользователей:**
  - GET /admin/users возвращает список с пагинацией
  - POST /admin/users создает пользователя
  - PUT /admin/users/:id обновляет роль
  - DELETE /admin/users/:id удаляет пользователя
  - POST /admin/users/:id/block блокирует на 24 часа
  - Фильтрация по роли, статусу работает

- **CRUD Групп:**
  - GET /admin/groups возвращает список
  - POST /admin/groups создает группу
  - POST /admin/groups/:id/students добавляет учеников

- **Античит Инциденты:**
  - GET /admin/incidents возвращает инциденты с фильтрами
  - GET /admin/incidents/:id возвращает детали
  - POST /admin/incidents/:id/unblock разблокирует пользователя

### E2E тесты (Playwright)
**Сценарий 1: Создание пользователя**
1. Логин как admin
2. Переход в /admin/users
3. Клик "Создать пользователя"
4. Заполнение формы (email, ФИО, роль: student, группа)
5. Сохранение
6. Проверка появления в таблице

**Сценарий 2: Блокировка пользователя**
1. Поиск пользователя по email
2. Клик "Заблокировать"
3. Указание причины
4. Проверка статуса "blocked" в таблице
5. Проверка записи в audit_log

**Сценарий 3: Создание группы и назначение куратора**
1. Переход в /admin/groups
2. Клик "Создать группу"
3. Ввод названия "8А класс", школа "Школа №1"
4. Выбор куратора из списка учителей
5. Сохранение
6. Проверка отображения группы

**Сценарий 4: Просмотр и разблокировка инцидента**
1. Переход в /admin/anticheat
2. Фильтр по типу "speed_hits"
3. Клик на инцидент
4. Просмотр деталей (гистограмма, паттерны)
5. Клик "Разблокировать пользователя"
6. Проверка смены статуса

**Сценарий 5: Изменение системных настроек**
1. Переход в /admin/settings
2. Вкладка "YandexGPT"
3. Ввод API Key, Folder ID
4. Клик "Тест подключения"
5. Проверка успешного ответа
6. Сохранение настроек
7. Проверка записи в audit_log

### Performance тесты
- **Таблица пользователей:** 1000 записей загружаются за ≤2 сек
- **Поиск по email:** ответ ≤300 мс (индекс на email)
- **Создание пользователя:** ≤1 сек
- **Загрузка инцидентов:** 500 записей за ≤2 сек

### Security тесты
- **Попытка доступа без роли:** GET /admin/users от user с ролью 'student' → 403 Forbidden
- **JWT без claims:** запрос с JWT без поля 'role' → 401 Unauthorized
- **XSS в форме:** попытка ввести `<script>alert(1)</script>` в ФИО → sanitized
- **SQL Injection:** попытка `' OR 1=1--` в email → валидация отклоняет
- **Rate limiting:** 11 запросов в минуту на /admin/users → 429 Too Many Requests

## Приоритизация внутри задачи

### P0 (Must-have для запуска)
1. Создание/редактирование/удаление пользователей
2. Блокировка/разблокировка
3. Назначение ролей
4. Базовая таблица групп
5. RBAC защита endpoints

### P1 (Важно для production)
6. Мониторинг инцидентов античита
7. Разблокировка из инцидентов
8. Системные настройки (YandexGPT, email)
9. Audit logging
10. Dashboard с метриками

### P2 (Nice-to-have)
11. Массовые операции
12. Экспорт в CSV/JSON
13. История действий пользователя
14. Графики и статистика
15. Управление бэкапами через UI

## Зависимости

**Блокирует:**
- A6-02 (UI Ученика) - без создания пользователей через UI нельзя протестировать ученика
- A6-03 (UI Куратора) - нужно сначала создать кураторов и группы

**Требует:**
- TD-06 (Authentication & Authorization) - JWT с claims, RBAC
- MongoDB коллекции (users, sessions)
- Redis для rate limiting

**Опционально:**
- A10 (Feature Flags) - для управления доступом к экспериментальным фичам
- A11 (SSO) - настройка SSO через UI

## Оценка времени

**Backend API (Rust):** ~44 часа
- Models и схемы MongoDB: 4 часа
- CRUD endpoints пользователей: 8 часов
- CRUD endpoints групп: 6 часов
- Endpoints инцидентов: 4 часа
- Endpoints настроек: 6 часов
- RBAC middleware: 4 часа
- Audit logging: 4 часа
- Тесты: 8 часов

**Frontend UI:** ~66 часов
- Страница admin-console.ts: 4 часа
- User management компонент: 12 часов
- Group management компонент: 8 часов
- Anticheat monitor компонент: 8 часов
- System settings компонент: 10 часов
- Audit logs компонент: 6 часов
- Формы (user-form, group-form): 6 часов
- API клиент и типы: 4 часов
- Тесты E2E: 8 часов

**Документация:** ~10 часов
- Admin guide: 4 часа
- API docs (OpenAPI): 4 часа
- RBAC docs: 2 часа

**Итого:** ~120 часов (≈15 рабочих дней для 1 разработчика, ≈7-8 дней для 2 разработчиков параллельно)

## Успешное завершение

Задача считается выполненной, когда:
1. Суперпользователь может создать пользователя через UI (email, роль, группа)
2. Суперпользователь может заблокировать/разблокировать пользователя
3. Суперпользователь может создать группу и назначить куратора
4. Таблица пользователей отображает все данные с фильтрами и поиском
5. Таблица инцидентов античита отображается с фильтрами
6. Разблокировка пользователя из инцидента работает
7. Системные настройки сохраняются и применяются
8. Все admin endpoints защищены RBAC (роль admin)
9. Все критические действия записываются в audit_log
10. E2E тесты основных сценариев проходят
11. API endpoints задокументированы в OpenAPI
12. Руководство для суперадминистратора создано

После выполнения A6-01 можно переходить к A6-02 (UI Ученика), используя созданный через админку тестовый аккаунт ученика.
