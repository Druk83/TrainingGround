# TD-06-3 — UI для просмотра и управления базой вопросов

## Контекст
Сейчас сгенерированные задания лежат в MongoDB (`tasks`, `template_enrichment_tasks`), но админ может видеть их только в разрезе одного шаблона (вкладка «Обогащение»). Нет единого интерфейса, где можно:

- просмотреть весь банк актуальных вопросов (живые + обогащённые) с фильтрами по темам, уровням, статусам;
- массово удалять/редактировать задания;
- выгружать результаты в CSV.

Это мешает контент-команде контролировать наполненность курсов, находить проблемные вопросы и проводить аналитику.

## Цели
1. Создать в админке центральный раздел «База вопросов» со списком всех задач, фильтрами и действиями.
2. Обеспечить возможность поиска/фильтра по ключевым параметрам (тема, уровень, шаблон, статус, источник, диапазон дат).
3. Дать инструменты массового управления: удаление, смена статуса, редактирование ответов/текста (при необходимости).
4. Добавить экспорт выбранного набора в CSV.

## Требования

### 1. Backend API
- [ ] Endpoint `GET /admin/questions`:
  - параметры: `template_id`, `level_id`, `topic_id`, `status`, `source (live|enriched|llm)`, `date_from`, `date_to`, `search` (по тексту/ответу), `page`, `limit`.
  - возвращает сводную структуру: `id`, `template_id`, `level/topic`, `text`, `answer`, `status`, `source`, `generated_at`, `updated_at`, `metadata`.
  - поддержка сортировки (дата, статус, источник).
- [ ] Endpoint `PATCH /admin/questions/:id` — обновление текста/ответа/статуса (с валидацией и логированием).
- [ ] Endpoint `DELETE /admin/questions/:id` — пометка как `deleted`.
- [ ] Endpoint `POST /admin/questions/export` — принимает фильтры, возвращает CSV (stream).
- [ ] Обновить модели и сервисы, чтобы `TemplateEnrichmentTaskRecord` и `Task` имели согласованный набор полей (`source`, `approved_by`, и т.п.).

### 2. Frontend (admin console)
- [ ] Добавить новую страницу `/admin/questions` и вкладку «База вопросов» в верхней навигации админки (`frontend/src/pages/admin-console.ts`). Кнопка должна стоять после ссылки «Шаблоны» и до «Темы и уровни», отображаться для ролей `admin` и `content_admin`, иметь собственный маршрут (например `<a href="/admin/questions">База вопросов</a>`), чтобы пользователь явно понимал, куда переходить.
- [ ] Страница отображает:
  - панель фильтров (dropdown для темы/уровня, чекбоксы статусов, диапазон дат, поле поиска);
  - таблица с колонками `Шаблон`, `Тема`, `Уровень`, `Правило`, `Текст`, `Ответ`, `Источник`, `Статус`, `Сгенерировано`, `Обновлено`, `Действия`. Для справочных колонок показываем человекочитаемые названия, чтобы сразу понять, к какому контенту относится вопрос;
  - пагинация (50 на страницу) + счётчик найденных.
- [ ] Действия:
  - кнопка «Редактировать» (модалка для правки текста/ответа, метаданных);
  - кнопка «Удалить» (пометка, с подтверждением);
  - массовые операции (checkbox + «Удалить выбранные», «Одобрить выбранные»).
- [ ] Кнопка «Выгрузить CSV» — отправляет текущие фильтры на backend и скачивает файл.
- [ ] Отображение источника (badge `live`, `enriched`, `llm`), ссылка на промпт/ответ для LLM-вариантов.

### 3. UX/безопасность
- [ ] Фильтры и пагинация должны сохранять состояние при переходе в другие разделы.
- [ ] Все изменения (редактирование, удаление) логируются в `audit_log` с указанием пользователя и rationale.
- [ ] Роли: доступ только у `admin`, `content_admin`.

### 4. Тесты и документация
- [ ] Backend unit/integration тесты на новые эндпоинты.
- [ ] Frontend тесты (rendering, фильтры, экспорт).
- [ ] Обновить `docs/content-admin-guide.md` разделом о новой вкладке (как искать/редактировать/выгружать).
